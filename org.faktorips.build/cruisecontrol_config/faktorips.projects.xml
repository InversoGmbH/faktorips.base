<!DOCTYPE project [ <!ENTITY mailmapping SYSTEM "mailmapping.txt"> ]>

<!--======================================================================================================-->
<!-- Faktor IPS project definition for Cruise Control (cc)                                                -->
<!-- by using the ant script './generate.cc.config.xml' a new config.xml file could be re-generated       -->
<!-- based on the project definition defined in this file                                                 -->
<!--======================================================================================================-->
<faktoripscruisecontrol>

    <!-- global properties -->
    <property name="workdir" value="checkout"/>
    <property name="mainbuildfile" value="build-faktorips.xml"/>
    <property name="logdir" value="logs"/>

    <!-- cvs property -->
    <property name="cvsroot" value="/usr/local/cvsroot"/>
    <property name="buildresultsurl" value="http://www.faktorzehn.org/cruisecontrol/buildresults"/>
    
    <!-- mail properties -->
    <property name="htmlemail.mailhost" value="62.245.204.82"/>
    <property name="htmlemail.returnaddress" value="cruise@faktorips.org"/>
    <property name="htmlemail.xsldir" value="/opt/cc/webapps/cruisecontrol/xsl/"/>
    <property name="htmlemail.css" value="/opt/cc/docs/cruisecontrol.css"/>

    <!-- cc project definitions -->
    
    <projects>
    
        
        <!--*****************************************************-->
        <!-- Faktor IPS projects -->
        <!--*****************************************************-->
        
        <!--=====================================================-->
        <!--Project definition: org.faktorips.util-->
        <!--=====================================================-->
        <project name="org.faktorips.util" mainbuildtarget="util">
        </project>
    
        <!--=====================================================-->
        <!--Project definition: org.faktorips.valuetypes-->
        <!--=====================================================-->        
        <project name="org.faktorips.valuetypes" mainbuildtarget="valuetypes">
            <depends>
                <project name="org.faktorips.util"/>
            </depends>
        </project>
        
        <!--=====================================================-->
        <!--Project definition: org.faktorips.java5-->
        <!--=====================================================-->             
        <project name="org.faktorips.valuetypes.java5" mainbuildtarget="valuetypes.java5">
            <depends>
                <project name="org.faktorips.util"/>
            </depends>
        </project>       
        
        <!--=====================================================-->
        <!--Project definition: org.faktorips.dtflcommon-->
        <!--=====================================================-->            
        <project name="org.faktorips.dtflcommon" mainbuildtarget="dtflcommon">
            <depends>
                <project name="org.faktorips.valuetypes"/>
                <project name="org.faktorips.util"/>
            </depends>            
        </project>
        
        <!--=====================================================-->
        <!--Project definition: org.faktorips.runtime-->
        <!--=====================================================-->          
        <project name="org.faktorips.runtime" mainbuildtarget="runtime">
            <depends>
                <project name="org.faktorips.valuetypes"/>
                <project name="org.faktorips.util"/>
            </depends>               
        </project>
        
        <!--=====================================================-->
        <!--Project definition: org.faktorips.runtime.java5-->
        <!--=====================================================-->         
        <project name="org.faktorips.runtime.java5" mainbuildtarget="runtime.java5">
            <depends>
                <project name="org.faktorips.valuetypes.java5"/>
                <project name="org.faktorips.util"/>
            </depends>               
        </project>   
        
        <!--=====================================================-->
        <!--Project definition: org.faktorips.fl-->
        <!--=====================================================-->                 
        <project name="org.faktorips.fl" mainbuildtarget="fl">
            <depends>
                <project name="org.faktorips.dtflcommon"/>
            </depends>                      
        </project>
        
        <!--=====================================================-->
        <!--Project definition: org.faktorips.devtools.core-->
        <!--=====================================================-->           
        <project name="org.faktorips.devtools.core" mainbuildtarget="devtools.core">
            <depends>
                <project name="org.faktorips.fl"/>
            </depends>
        </project>
        
        <!--=====================================================-->
        <!--Project definition: org.faktorips.devtools.stdbuilder-->
        <!--=====================================================-->           
        <project name="org.faktorips.devtools.stdbuilder" mainbuildtarget="devtools.stdbuilder">
            <depends>
                <project name="org.faktorips.fl"/>
                <project name="org.faktorips.runtime"/>
                <project name="org.faktorips.devtools.core"/>
            </depends>            
        </project>
        
        <!--=====================================================-->
        <!--Project definition: org.faktorips.devtools.cor.ui-->
        <!--=====================================================-->          
        <project name="org.faktorips.devtools.core.ui" mainbuildtarget="devtools.core.ui">
            <depends>
                <project name="org.faktorips.devtools.core"/>
            </depends>
        </project>
        
        <!--=====================================================-->
        <!--Project definition: org.faktorips.devtools.ant-->
        <!--=====================================================-->           
        <project name="org.faktorips.devtools.ant" mainbuildtarget="devtools.ant" 
            testresult="${workdir}/${project.name}/scripts/">
        </project>

        <!--=====================================================-->
        <!--Project definition: org.faktorips.uml-->
        <!--=====================================================-->           
        <project name="org.faktorips.uml" mainbuildtarget="uml" 
            testresult="${workdir}/${project.name}/scripts/">
        </project>
        
        <!--=====================================================-->
        <!--Project definition: org.faktorips.pluginbuilder-->
        <!--=====================================================-->
        <!-- scheduleintervall: 300 = 5 minutes -->
        <project name="org.faktorips.pluginbuilder" mainbuildtarget="pluginbuilder.faktorips"
            testresult="${workdir}/../pluginbuilder_tmp/org.faktorips.pluginbuilder/results/testresults/xml" 
            testmerge="*test.xml"
            scheduleintervall="300"> 
            <jvmarg arg="-Dprg=cruise.pluginbuilder"/>
            <jvmarg arg="-Xms124m"/>
            <jvmarg arg="-Xmx512m"/>
            <depends>
                <project name="org.faktorips.util"/>
                <project name="org.faktorips.valuetypes"/>
                <project name="org.faktorips.dtflcommon"/>
                <project name="org.faktorips.runtime"/>
                <project name="org.faktorips.fl"/>
                <project name="org.faktorips.devtools.core"/>
                <project name="org.faktorips.devtools.stdbuilder"/>
                <project name="org.faktorips.devtools.core.ui"/>
                <project name="org.faktorips.devtools.ant"/>
                <!-- plugin test dependencies-->
                <cvs module="org.faktorips.devtools.core.test"/>
                <cvs module="org.faktorips.devtools.stdbuilder.test"/>
                <cvs module="org.faktorips.devtools.core.ui.test"/>            
                <cvs module="org.faktorips.devtools.ant.test"/>            
                <cvs module="org.faktorips.uml.test"/>                
            </depends>      
        </project>

        <!--=====================================================-->
        <!--Project definition: org.faktorips.integrationtest-->
        <!--=====================================================-->    
        <project name="org.faktorips.integrationtest" mainbuildtarget="pluginbuilder.integrationtest" javaprojectname="org.faktorips.integrationtest"
            testresult="${workdir}/../pluginbuilder_tmp/org.faktorips.pluginbuilder/workspace_integrationtest/org.faktorips.integrationtest/results/xml" 
            testmerge="*Test.xml" scheduleintervall="300">
            <jvmarg arg="-Dprg=cruise.integrationtest"/>
            <depends>
                <project name="org.faktorips.pluginbuilder"/>
            </depends>         
        </project>

        <!--============================================================-->
        <!--Project definition: org.faktorips.integrationtest.java5-->
        <!--============================================================-->    
        <project name="org.faktorips.integrationtest.java5" mainbuildtarget="pluginbuilder.integrationtest.java5" javaprojectname="org.faktorips.integrationtest.java5"
            testresult="${workdir}/../pluginbuilder_tmp/org.faktorips.pluginbuilder/workspace_integrationtest_java5/org.faktorips.integrationtest.java5/results/xml" 
            testmerge="*Test.xml" scheduleintervall="300">
            <jvmarg arg="-Dprg=cruise.integrationtest.java5"/>
            <depends>
                <project name="org.faktorips.pluginbuilder"/>
            </depends>         
        </project>

        <!--*****************************************************-->
        <!-- Customer projects -->
        <!--*****************************************************-->

        <!--============================================================-->
        <!--Project definition: de.qv.faktorips -->
        <!--============================================================-->    
        <project name="de.qv.faktorips" mainbuildtarget="de.qv.faktorips">
            <!-- TODO mail nur an developer bei der kqv -->
            <depends>
                <project name="org.faktorips.devtools.core"/>
            </depends>         
        </project>
        
<!-- 
TODO bbv und msgp 
-->

    </projects>
   
    <!-- cc publisher for several faktorips projects s-->
    <publishers>
        <!--=====================================================-->
        <!-- publisher for all projects, htmlemail used in all projects -->
        <!--   attribute spamwhilebroken=true : e-mail reports -->
        <!--     on failed builds will continue for subsequent failed builds. -->
        <!--     see http://cruisecontrol.sourceforge.net/main/configxml.html#email -->
        <!--=====================================================-->
        <publisher id="htmlemail">
            <htmlemail 
                buildresultsurl="${buildresultsurl}/${project.name}"
                mailhost="${htmlemail.mailhost}"
                username=""
                password=""
                returnaddress="${htmlemail.returnaddress}"
                skipusers="false" 
                spamwhilebroken="true"
                returnname="faktorips-buildqueue"
                subjectprefix="[CC ${project.name}]"
                reportsuccess="always"
                xsldir="${htmlemail.xsldir}"
                css="${htmlemail.css}">
                 
                <!-- the failure node with attribute reportWhenFixed, will be created
                     dynamically using all developer addresses see xsl/cretatecruisecontrolconfig.xsl
                     <failure reportWhenFixed="true" address="${htlmemail.reportWhenFixed.address}" />
                -->
                 
                <!-- mail mappings are specified in ENTITY mailmapping see this xml header -->
                &mailmapping;
                
            </htmlemail>
        </publisher>
        
        <!--===========================================================================================-->
        <!-- publisher for org.faktorips.integrationtest, copy build artefacts to the cc log directory -->
        <!--===========================================================================================-->
        <publisher project="org.faktorips.integrationtest" id="copy.artifacts">
            <antpublisher 
                     buildfile="${mainbuildfile}"
                     uselogger="true"
                     usedebug="false"
                     target="copy.artifacts.pluginbuilder.faktorips">
                    <property name="ccProjectDir" value="${logdir}/${project.name}"/>
                    <property name="workspaceName" value="workspace_integrationtest"/>
                </antpublisher>
        </publisher>

        <!--===========================================================================================-->
        <!-- publisher for org.faktorips.integrationtest.java5, copy build artefacts to the cc log directory -->
        <!--===========================================================================================-->
        <publisher project="org.faktorips.integrationtest.java5" id="copy.artifacts">
            <antpublisher 
                     buildfile="${mainbuildfile}"
                     uselogger="true"
                     usedebug="false"
                     target="copy.artifacts.pluginbuilder.faktorips">
                    <property name="ccProjectDir" value="${logdir}/${project.name}"/>
                    <property name="workspaceName" value="workspace_integrationtest_java5"/>
                </antpublisher>
        </publisher>
        
        <!--===========================================================================================-->
        <!-- publisher for org.faktorips.pluginbuilder, copy build artefacts to the cc log directory -->
        <!--===========================================================================================-->
        <publisher project="org.faktorips.pluginbuilder" id="copy.artifacts">
            <antpublisher 
                     buildfile="${mainbuildfile}"
                     uselogger="true"
                     usedebug="false"
                     target="copy.artifacts.pluginbuilder.faktorips">
                    <property name="ccProjectDir" value="${logdir}/${project.name}"/>
                    <property name="workspaceName" value="workspace"/>
                </antpublisher>
        </publisher>
 
    </publishers>
    
</faktoripscruisecontrol>
