<project name="org.faktorips.util" default="buildjar">

	<property name="clientpackage" value="**" />

	<property name="projectname" value="runtime.java5" />
	<property name="buildproject.path" value="./../../org.faktorips.build" />
	
	<!-- reads the ipsversion (bundle version) from the manifest file -->
	<loadproperties srcFile="../META-INF/MANIFEST.MF"/>
	<property name="manifest-version" value="${Bundle-Version}" />
	<property name="manifest-title" value="${Bundle-Name}" />
	<property name="manifest-vendor" value="${Bundle-Vendor}" />
    <!-- javac source/target VM version -->
    <property name="vmversion" value="1.6"/>
	
	<!-- classes inside the client jar -->
	<!-- TODO Abh. zu IEnumValue wieder entfernen! nach fix -->
	<property name="clientJarClassDir" location="classes/java"/>
	<property name="clientJarClasses" 
		value="**/MessageList*.class,
			   **/Message*.class,
			   **/MsgReplacementParameter*.class,
			   **/ObjectProperty*.class,
	           **/IEnumValue*.class"/>
	
	<property name="clientJarSrcDir" location="../src"/>
	<property name="clientJarSrc" 
		value="**/MessageList.java,
			   **/Message.java,
			   **/MsgReplacementParameter.java,
			   **/ObjectProperty.java,
               **/IEnumValue.java"/>
	
	<!-- classpath: insert dependend project libs here! -->
	<path id="classpath">
        <filelist dir="${buildproject.path}/lib">
                <file name="junit.jar"/>
        </filelist>
		
		<!-- runtime depends on org.faktorips.util -->
		<fileset dir="../../org.faktorips.util/" >
		    <patternset>
		    		<include name="lib/*.jar" /> 
		    		<include name="build/results/*.jar" />
		    </patternset>
		</fileset>
		
		<!-- runtime depends on org.faktorips.valuetypes -->
		<fileset dir="../../org.faktorips.valuetypes.java5/" >
		    <patternset> 
	    		<include name="lib/*.jar" /> 
		    	<include name="build/results/*.jar" />
		    </patternset>
		</fileset>
		
        <!-- jars in own project lib directory -->
        <fileset dir="../lib/">
            <patternset>
                <include name="*.jar"/>
            </patternset>
        </fileset>
	</path>
	
	<!-- calls default-target of template-buildfile -->
	<target name="buildjar" depends="buildsrcjar">
		<ant antfile="${buildproject.path}/build.xml" target="buildjar">
			<reference refid="classpath" torefid="classpath"/>
		</ant>
		<ant antfile="${buildproject.path}/build.xml" target="update.jar.in.integrationtest">
			<property name="integrationtest.cvs.module" value="org.faktorips.integrationtest.java5"/>
		</ant>		
	</target>
	
	<!-- calls clean-target of template-buildfile -->
	<target name="clean">
		<ant antfile="${buildproject.path}/build.xml" target="clean"/>
	</target>
	
	<!-- insert individual targets here -->
	
	<!-- build source jarfile -->
	<target name="buildsrcjar" >
		<ant antfile="${buildproject.path}/build.xml" target="buildsrcjar"/>
	</target>
	
	<!-- build faktorips runtime client -->
	<target name="buildclientjar" >
		<ant antfile="${buildproject.path}/build.xml" target="buildSpecificJar">
			<property name="projectname" value="client.java5" />
			<property name="jarfile" location="results/faktorips-runtime-client.java5.jar" />		
			<property name="selectedDir" value="${clientJarClassDir}" />			
			<property name="selectedFiles" value="${clientJarClasses}" />			
			<reference refid="classpath" torefid="classpath"/>
		</ant>
	</target>
	
	<!-- build faktorips runtime client -->
	<target name="buildclientsrcjar" >
		<ant antfile="${buildproject.path}/build.xml" target="buildSpecificJar">
			<property name="projectname" value="client.java5" />
			<property name="manifest-title" value="FaktorIPS-Runtime client-jar" />
			<property name="jarfile" location="results/faktorips-runtime-client-src.java5.zip" />	
			<property name="selectedDir" value="${clientJarSrcDir}" />	
			<property name="selectedFiles" value="${clientJarSrc}" />			
			<reference refid="classpath" torefid="classpath"/>
		</ant>
	</target>
	
	<!-- build all jars -->
	<target name="buildAllsJars" depends="buildjar,buildsrcjar,buildclientjar,buildclientsrcjar" description="build all jars"/>
	
	
</project>