<project name="org.faktorips.util" default="buildjar">

	<!-- can also be set from outside, ie. eclipse workspace -->
	<property name="javacchome" value="/var/lib/javacc/" />
	
	<property name="parser_src" value="../src/org/faktorips/fl/parser/" />

	
	<!-- classpath: insert dependend project libs here! -->
	<path id="classpath">
	    <filelist dir="./../../org.faktorips.build/lib">
	            <file name="junit.jar"/>
	    </filelist>

		<!-- own lib fileset -->
		<fileset dir="../lib">
		    <patternset> 
		    		<include name="**/*.jar" />
		    </patternset>
		</fileset>

		
		<!-- fl depends on org.faktorips.valuetypes -->
		<fileset dir="../../org.faktorips.valuetypes/" > 
		    <patternset> 
		    		<include name="build/results/*.jar" />
		    </patternset>
		</fileset>
		
		<!-- fl depends on org.faktorips.util -->
		<fileset dir="../../org.faktorips.util/" >
		    <patternset>
		    		<include name="lib/*.jar" /> 
		    		<include name="build/results/*.jar" />
		    </patternset>
		</fileset>
		
		<!-- fl depends on org.faktorips.dtflcommon -->
		<fileset dir="../../org.faktorips.dtflcommon/" >
		    <patternset>
		    		<include name="lib/*.jar" /> 
		    		<include name="build/results/*.jar" />
		    </patternset>
		</fileset>
		
	</path>
	
	<!-- calls default-target of template-buildfile -->
	<target name="buildjar" depends="buildparser" >
		<ant antfile="../../org.faktorips.build/build.xml" target="buildjar">
			<property name="projectname" value="fl" />
			<reference refid="classpath" torefid="classpath"/>
		</ant>
	</target>
	
	<!-- calls clean-target of template-buildfile -->
	<target name="cleanParserSource">
		<delete includeemptydirs="true" >
						<fileset dir="${parser_src}">
							<exclude name="**/*SimpleNode*" />
						</fileset>
		</delete>
	</target>
	
	
	<!-- insert individual targets here -->
	
	<!-- compile formular-language parser -->
	<target name="buildparser" >
		
		
		<mkdir dir="${parser_src}" />
		<jjtree javacchome="${javacchome}" target="../javacc/fl.jjt" outputdirectory="${parser_src}" 
		        nodepackage="org.faktorips.fl.parser"/>

		<javacc javacchome="${javacchome}" target="${parser_src}/fl.jj" outputdirectory="${parser_src}"
			     />
		
	</target>
	
	<target name="clean">
		<ant antfile="../../org.faktorips.build/build.xml" target="clean" />
	</target>
	

	
</project>