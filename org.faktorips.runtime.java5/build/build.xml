<project name="org.faktorips.util" default="buildjar">

	<property name="clientpackage" value="**" />
	
	<property name="projectname" value="runtime" />
	
	<!-- reads the ipsversion (bundle version) from the manifest file -->
	<loadproperties srcFile="../META-INF/MANIFEST.MF"/>
	<property name="manifest-version" value="${Bundle-Version}" />
	<property name="manifest-title" value="${Bundle-Name}" />
	<property name="manifest-vendor" value="${Bundle-Vendor}" />
	
	<!-- classes inside the client jar -->
	<property name="clientJarClassDir" location="classes/java"/>
	<property name="clientJarClasses" 
		value="**/MessageList.class,
			   **/Message.class,
			   **/MsgReplacementParameter.class,
			   **/ObjectProperty.class"/>
	
	<property name="clientJarSrcDir" location="../src"/>
	<property name="clientJarSrc" 
		value="**/MessageList.java,
			   **/Message.java,
			   **/MsgReplacementParameter.java,
			   **/ObjectProperty.java"/>
	
	<!-- classpath: insert dependend project libs here! -->
	<path id="classpath">
        <filelist dir="./../../org.faktorips.build/lib">
                <file name="junit.jar"/>
        </filelist>
		
		<!-- runtime depends on org.faktorips.util -->
		<fileset dir="../../org.faktorips.util/" >
		    <patternset>
		    		<include name="lib/*.jar" /> 
		    		<include name="build/results/*.jar" />
		    </patternset>
		</fileset>
		
		<!-- runtime depends on org.faktorips.valuetypes -->
		<fileset dir="../../org.faktorips.valuetypes/" >
		    <patternset> 
	    		<include name="lib/*.jar" /> 
		    	<include name="build/results/*.jar" />
		    </patternset>
		</fileset>
		
        <!-- jars in own project lib directory -->
        <fileset dir="../lib/">
            <patternset>
                <include name="*.jar"/>
            </patternset>
        </fileset>
	</path>
	
	<!-- calls default-target of template-buildfile -->
	<target name="buildjar" >
		<ant antfile="../../org.faktorips.build/build.xml" target="buildjar">
			<reference refid="classpath" torefid="classpath"/>
		</ant>
	</target>
	
	<!-- calls clean-target of template-buildfile -->
	<target name="clean">
		<ant antfile="../../org.faktorips.build/build.xml" target="clean"/>
	</target>
	
	<!-- insert individual targets here -->
	
	<!-- build source jarfile -->
	<target name="buildsrcjar" >
		<ant antfile="../../org.faktorips.build/build.xml" target="buildsrcjar"/>
	</target>
	
	<!-- build faktorips runtime client -->
	<target name="buildclientjar" >
		<ant antfile="../../org.faktorips.build/build.xml" target="buildSpecificJar">
			<property name="projectname" value="client" />
			<property name="jarfile" location="results/faktorips-runtime-client.jar" />		
			<property name="selectedDir" value="${clientJarClassDir}" />			
			<property name="selectedFiles" value="${clientJarClasses}" />			
			<reference refid="classpath" torefid="classpath"/>
		</ant>
	</target>
	
	<!-- build faktorips runtime client -->
	<target name="buildclientsrcjar" >
		<ant antfile="../../org.faktorips.build/build.xml" target="buildSpecificJar">
			<property name="projectname" value="client" />
			<property name="manifest-title" value="FaktorIPS-Runtime client-jar" />
			<property name="jarfile" location="results/faktorips-runtime-client-src.zip" />	
			<property name="selectedDir" value="${clientJarSrcDir}" />	
			<property name="selectedFiles" value="${clientJarSrc}" />			
			<reference refid="classpath" torefid="classpath"/>
		</ant>
	</target>
	
	<!-- build all jars -->
	<target name="buildAllsJars" depends="buildjar,buildsrcjar,buildclientjar,buildclientsrcjar"/>

	
</project>