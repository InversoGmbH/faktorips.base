<?xml version="1.0" encoding="UTF-8"?>
<project name="org.faktorips.pluginbuilder" default="buildjar">
    
	<property name="eclipseDir" value="/usr/lib/eclipse-3.4-test"/>

	<!--classpath: insert dependend project libs here!-->
    <path id="classpath">
        <filelist dir="./../../org.faktorips.build/lib">
                <file name="junit.jar"/>
        </filelist>
                	
		<!-- eclipse libraries -->
		<fileset dir="${eclipseDir}/">
            <patternset>
                <include name="plugins/org.eclipse.jface*.jar"/>
                <include name="plugins/org.eclipse.text*.jar"/>
                <include name="plugins/org.eclipse.jdt*.jar"/>
                <include name="plugins/org.eclipse.emf*codegen*.jar"/>
                <include name="plugins/org.eclipse.core*.jar"/>
                <include name="plugins/org.eclipse.osgi*.jar"/>
                <include name="plugins/org.eclipse.swt*.jar"/>
                <include name="plugins/org.eclipse.ui*.jar"/>
                <include name="plugins/org.eclipse.search*.jar"/>
                <include name="plugins/org.eclipse.team.*.jar"/>
                <include name="plugins/org.eclipse.compare*.jar"/>
                <include name="plugins/org.eclipse.debug.core*.jar"/>
                <include name="plugins/org.eclipse.debug.ui*.jar"/>
                <include name="plugins/org.eclipse.equinox*.jar"/>
                <include name="plugins/com.ibm.icu*.jar"/>
                <include name="plugins/org.eclipse.draw2d*.jar"/>
                <include name="plugins/org.eclipse.gef*.jar"/>
			    <include name="plugins/org.eclipse.ltk.core.refactoring*.jar"/>
			    <include name="plugins/org.eclipse.ltk.ui.refactoring*.jar"/>
            </patternset>
        </fileset>
        <!--devtools.core depends on org.faktorips.valuetypes-->
        <fileset dir="../../org.faktorips.valuetypes/">
            <patternset>
                <include name="build/results/*.jar"/>
            </patternset>
        </fileset>
        <!--devtools.core depends on org.faktorips.fl-->
        <fileset dir="../../org.faktorips.fl/">
            <patternset>
                <include name="lib/*.jar"/>
                <include name="build/results/*.jar"/>
            </patternset>
        </fileset>
        <!--devtools.core depends on org.faktorips.util-->
        <fileset dir="../../org.faktorips.util/">
            <patternset>
                <include name="lib/*.jar"/>
                <include name="build/results/*.jar"/>
            </patternset>
        </fileset>
        <!--devtools.core depends on org.faktorips.dtflcommon-->
        <fileset dir="../../org.faktorips.dtflcommon/">
            <patternset>
                <include name="lib/*.jar"/>
                <include name="build/results/*.jar"/>
            </patternset>
        </fileset>
        <!--devtools.core depends on org.faktorips.dtflcommon-->
        <fileset dir="../../org.faktorips.runtime/">
            <patternset>
                <include name="lib/*.jar"/>
                <include name="build/results/*.jar"/>
            </patternset>
        </fileset>
        <!-- depends on org.faktorips.devtools.core-->
        <fileset dir="../../org.faktorips.devtools.core/">
            <patternset>
                <include name="lib/*.jar"/>
                <include name="build/results/*.jar"/>
            </patternset>
        </fileset>
        <!-- depends on org.faktorips.nebula-->
        <fileset dir="../../org.faktorips.nebula/">
            <patternset>
                <include name="lib/*.jar"/>
                <include name="build/results/*.jar"/>
            </patternset>
        </fileset>
    </path>
    <property name="path" refid="classpath"/>
    
	<!--calls clean-target of template-buildfile-->
    <target name="clean">
        <ant antfile="../../org.faktorips.build/build.xml" target="clean"/>
    </target>
    
	<!--calls default-target of template-buildfile-->
    <target name="buildProdJar">
        <!--different name, because buildJar depends on this target-->
        <ant antfile="../../org.faktorips.build/build.xml" target="buildjar">
            <property name="projectname" value="devtools.core.ui"/>
            <reference refid="classpath" torefid="classpath"/>
        </ant>
    </target>
    
	<!--insert individual targets here-->
    <target name="buildjar" depends="buildProdJar">
        <!--we need compiled testcases for some other testprojects to build (bad idea)-->
        <jar destfile="results/faktorips.devtools.core.ui.test.jar">
            <fileset dir="classes/">
                <patternset>
                    <include name="**/*Test*"/>
                </patternset>
            </fileset>
        </jar>
    </target>
</project>